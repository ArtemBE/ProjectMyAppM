{"ast":null,"code":"import React, { useRef } from \"react\";\nconst polz = useRef(); //document.body.querySelector('.filters-price-slider');\nconst left = useRef(); //polz.querySelector('.filters-price-slider__left-handler');\nconst right = useRef(); //polz.querySelector('.filters-price-slider__right-handler');\nconst way = useRef(); //polz.querySelector('.filters-price-slider__way');\n\n//const minPrice = document.body.querySelector('.price-input');\nconst input1 = useRef(); //document.body.querySelector('.filters-price-input__left-input');\nconst input2 = useRef(); //document.body.querySelector('.filters-price-input__right-input');\n\nconst minPrice = 3990;\nconst maxPrice = 139990;\nconst valid = input => !isNaN(Number(input.current.value)) && Number(input.current.value) >= 3990 && Number(input.current.value) <= 139990;\nlet clampedLeft = false;\nlet clampedRight = false;\nlet lastX;\nconst move = e => {\n  let r = parseInt(getComputedStyle(right.current).right); //позиция правого handler\n  let l = parseInt(getComputedStyle(left.current).left); //позиция левого handler\n  const invalidRelPos = () => {\n    //проверка находится ли правый ползунок левее левого\n    r = parseInt(getComputedStyle(right.current).right);\n    l = parseInt(getComputedStyle(left.current).left);\n    return l + r > box.width - 22;\n  };\n  //проверка идет ли правый ползунок вправо, а левый влево\n  const invalidDir = () => clampedLeft && e.clientX > lastX || clampedRight && e.clientX < lastX;\n  const box = polz.current.getBoundingClientRect();\n  if (e.clientX < box.left - 8) return null; //если левый ползунок выходит за рамки\n  if (e.clientX > box.left + box.width - 8) return null; //если правый ползунок выходит за рамки\n  if (invalidRelPos() && invalidDir()) return null; //если правый ползунок пытается перескачить за левый или наоборот\n  if (clampedLeft) {\n    //если зажат левый\n    //console.log(getComputedStyle(left).left+getComputedStyle(right).right);\n    left.current.style.left = Number(e.clientX - box.left) + 'px';\n    //если левый перескачил через правый - возвращаем обратно\n    if (invalidRelPos()) left.current.style.left = Number(box.current.width - 22 - r) + 'px';\n    r = parseInt(getComputedStyle(right.current).right);\n    l = parseInt(getComputedStyle(left.current).left);\n    input1.current.value = minPrice + Math.round((maxPrice - minPrice) / box.width * (l + 8));\n  }\n  if (clampedRight) {\n    //если зажат правый\n    //console.log(getComputedStyle(left).left+getComputedStyle(right).right);\n    right.current.style.right = Number(box.left + box.width - e.clientX - 17) + 'px';\n    //если правый перескачил через левый - возвращаем обратно\n    if (invalidRelPos()) right.current.style.right = Number(box.width - 22 - l) + 'px';\n    r = parseInt(getComputedStyle(right.current).right);\n    l = parseInt(getComputedStyle(left.current).left);\n    input2.current.value = maxPrice - Math.round((maxPrice - minPrice) / box.width * (r + 8));\n  }\n  lastX = e.clientX; //предыдущее положение\n};\n\nleft.current.addEventListener('mousedown', e => {\n  e.preventDefault();\n  clampedRight = false;\n  clampedLeft = true;\n});\nright.current.addEventListener('mousedown', e => {\n  e.preventDefault();\n  clampedLeft = false;\n  clampedRight = true;\n});\ndocument.addEventListener('mousemove', move);\ndocument.addEventListener('mouseup', () => {\n  clampedLeft = clampedRight = false;\n});","map":{"version":3,"names":["React","useRef","polz","left","right","way","input1","input2","minPrice","maxPrice","valid","input","isNaN","Number","current","value","clampedLeft","clampedRight","lastX","move","e","r","parseInt","getComputedStyle","l","invalidRelPos","box","width","invalidDir","clientX","getBoundingClientRect","style","Math","round","addEventListener","preventDefault","document"],"sources":["C:/Users/Артемий/Desktop/Учеба/НеУнивер/WEB/Projects/Pet/store/src/scripts/slider.js"],"sourcesContent":["import React, {useRef} from \"react\";\r\n\r\nconst polz = useRef(); //document.body.querySelector('.filters-price-slider');\r\nconst left = useRef(); //polz.querySelector('.filters-price-slider__left-handler');\r\nconst right = useRef(); //polz.querySelector('.filters-price-slider__right-handler');\r\nconst way = useRef(); //polz.querySelector('.filters-price-slider__way');\r\n\r\n//const minPrice = document.body.querySelector('.price-input');\r\nconst input1 = useRef(); //document.body.querySelector('.filters-price-input__left-input');\r\nconst input2 = useRef(); //document.body.querySelector('.filters-price-input__right-input');\r\n\r\nconst minPrice = 3990;\r\nconst maxPrice = 139990;\r\n\r\nconst valid = input => !isNaN(Number(input.current.value)) && \r\n                              Number(input.current.value)>=3990 &&\r\n                              Number(input.current.value)<=139990;\r\n\r\n\r\nlet clampedLeft = false;\r\nlet clampedRight = false;\r\nlet lastX;\r\n\r\n\r\nconst move = e => {\r\n    let r = parseInt(getComputedStyle(right.current).right);  //позиция правого handler\r\n    let l = parseInt(getComputedStyle(left.current).left);    //позиция левого handler\r\n    const invalidRelPos = () => {           //проверка находится ли правый ползунок левее левого\r\n        r = parseInt(getComputedStyle(right.current).right);\r\n        l = parseInt(getComputedStyle(left.current).left);\r\n        return l+r > box.width-22;\r\n    }\r\n    //проверка идет ли правый ползунок вправо, а левый влево\r\n    const invalidDir = () => (clampedLeft && (e.clientX>lastX)) || (clampedRight && (e.clientX<lastX))  \r\n\r\n    const box = polz.current.getBoundingClientRect();\r\n    if(e.clientX<box.left-8) return null;   //если левый ползунок выходит за рамки\r\n    if(e.clientX>box.left+box.width-8) return null;     //если правый ползунок выходит за рамки\r\n    if(invalidRelPos() && invalidDir()) return null;    //если правый ползунок пытается перескачить за левый или наоборот\r\n    if(clampedLeft){    //если зажат левый\r\n        //console.log(getComputedStyle(left).left+getComputedStyle(right).right);\r\n        left.current.style.left = Number(e.clientX - box.left)+'px';\r\n        //если левый перескачил через правый - возвращаем обратно\r\n        if(invalidRelPos()) left.current.style.left = Number(box.current.width-22-r)+'px';\r\n        r = parseInt(getComputedStyle(right.current).right);\r\n        l = parseInt(getComputedStyle(left.current).left);\r\n        input1.current.value = minPrice + Math.round((maxPrice-minPrice)/box.width*(l+8));\r\n    }\r\n    if(clampedRight){   //если зажат правый\r\n        //console.log(getComputedStyle(left).left+getComputedStyle(right).right);\r\n        right.current.style.right = Number(box.left + box.width - e.clientX-17)+'px';\r\n        //если правый перескачил через левый - возвращаем обратно\r\n        if(invalidRelPos()) right.current.style.right = Number(box.width-22-l)+'px';\r\n        r = parseInt(getComputedStyle(right.current).right);\r\n        l = parseInt(getComputedStyle(left.current).left);\r\n        input2.current.value = maxPrice - Math.round((maxPrice-minPrice)/box.width*(r+8));\r\n    }\r\n    lastX=e.clientX;    //предыдущее положение\r\n}\r\n\r\nleft.current.addEventListener('mousedown', (e)=>{\r\n    e.preventDefault();\r\n    clampedRight=false;\r\n    clampedLeft=true;\r\n});\r\nright.current.addEventListener('mousedown', (e)=>{\r\n    e.preventDefault();\r\n    clampedLeft=false;\r\n    clampedRight=true;\r\n});\r\n\r\ndocument.addEventListener('mousemove', move);\r\ndocument.addEventListener('mouseup', ()=>{clampedLeft=clampedRight=false;});"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
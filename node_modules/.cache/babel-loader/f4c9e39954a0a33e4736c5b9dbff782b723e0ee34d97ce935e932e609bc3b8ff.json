{"ast":null,"code":"import { createStore } from \"redux\";\n/* import access from '../data/product/Access';\r\nimport audio from '../data/product/Audio';\r\nimport laptop from '../data/product/Laptop'; */\nimport phone from '../data/product/Phone';\n/* import tablet from '../data/product/Tablet';\r\nimport variants from \"../scripts/Variants\"; */\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport matchFilter from \"../scripts/match\";\nconst defaultStateProducts = {\n  priceFloor: 3990,\n  priceCeiling: 139990,\n  characteristics: ['color', 'memory', 'producer'],\n  currentCategory: phone,\n  choise: {\n    memory: [],\n    producer: [],\n    color: [],\n    type: []\n  },\n  productPage: 1\n};\nconst defaultState = {\n  ...defaultStateProducts,\n  doc: document,\n  basket: new Map(),\n  fullCard: false,\n  scroll: 0\n};\nfor (let i = 0; i < localStorage.length; i++) {\n  defaultState.basket.set(localStorage.key(i), Number(localStorage.getItem(localStorage.key(i))));\n}\nconsole.log(defaultState.basket);\nconst reducer = function (state = defaultState, {\n  type,\n  payload\n}) {\n  let obj;\n  switch (type) {\n    case 'changePriceFloor':\n      //console.log('change f'); \n      return {\n        ...state,\n        priceFloor: payload,\n        productPage: 1\n      };\n    case 'changePriceСeiling':\n      //console.log('change c'); \n      return {\n        ...state,\n        priceCeiling: payload,\n        productPage: 1\n      };\n    case 'addVariant':\n      let c = payload.char;\n      let v = payload.variant;\n      if (state.choise[c].includes(v)) return state;\n      let res = {\n        ...state,\n        choise: {\n          ...state.choise,\n          [c]: state.choise[c].concat(v)\n        },\n        productPage: 1\n      };\n      //console.log(res.choise.color);\n      return res;\n    case 'removeVariant':\n      let c1 = payload.char;\n      let v1 = payload.variant;\n      return {\n        ...state,\n        choise: {\n          ...state.choise,\n          [c1]: state.choise[c1].filter(item => item !== v1)\n        },\n        productPage: 1\n      };\n    case 'changeCurrentCategory':\n      return {\n        ...state,\n        currentCategory: payload,\n        choise: {\n          memory: [],\n          producer: [],\n          color: [],\n          type: []\n        }\n      };\n    case 'changePage':\n      if (state.productPage < 2 && payload < 0) return state;\n      if (state.productPage >= Math.ceil(state.currentCategory.filter(item => matchFilter(item, state.choise, {\n        floor: state.priceFloor,\n        ceiling: state.priceCeiling\n      })).length / 6) && payload > 0) return state;\n      return {\n        ...state,\n        productPage: state.productPage + payload\n      };\n    case 'to1stPage':\n      return {\n        ...state,\n        productPage: 1\n      };\n    case 'setDefaultState':\n      return {\n        ...state,\n        ...defaultStateProducts\n      };\n    case 'addProduct':\n      obj = JSON.stringify(payload);\n      localStorage.setItem(obj, localStorage.getItem(obj) - -1);\n      return state.basket.has(obj) ? {\n        ...state,\n        basket: state.basket.set(obj, state.basket.get(obj) + 1)\n      } : {\n        ...state,\n        basket: state.basket.set(obj, 1)\n      };\n    case 'removeProduct':\n      //console.log(state.basket.get(payload));\n      obj = JSON.stringify(payload);\n      localStorage.getItem(obj) > 1 ? localStorage.setItem(obj, localStorage.getItem(obj) - 1) : localStorage.removeItem(obj);\n      if (state.basket.get(obj) === 1) state.basket.delete(obj);\n      return state.basket.get(obj) > 1 ? {\n        ...state,\n        basket: state.basket.set(obj, state.basket.get(obj) - 1)\n      } : {\n        ...state,\n        basket: state.basket\n      };\n    case 'openCard':\n      //console.log('scr1 ' + window.pageYOffset);\n      return {\n        ...state,\n        fullCard: payload,\n        scroll: window.pageYOffset\n      };\n    case 'closeCard':\n      return {\n        ...state,\n        fullCard: false\n      };\n    default:\n      //console.log('default'); \n      return state;\n  }\n};\nconst store = createStore(reducer, composeWithDevTools());\nexport default store;","map":{"version":3,"names":["createStore","phone","composeWithDevTools","matchFilter","defaultStateProducts","priceFloor","priceCeiling","characteristics","currentCategory","choise","memory","producer","color","type","productPage","defaultState","doc","document","basket","Map","fullCard","scroll","i","localStorage","length","set","key","Number","getItem","console","log","reducer","state","payload","obj","c","char","v","variant","includes","res","concat","c1","v1","filter","item","Math","ceil","floor","ceiling","JSON","stringify","setItem","has","get","removeItem","delete","window","pageYOffset","store"],"sources":["C:/Users/Артемий/Desktop/Учеба/НеУнивер/WEB/Projects/Pet/store/src/store/index.js"],"sourcesContent":["import { createStore } from \"redux\";\r\n/* import access from '../data/product/Access';\r\nimport audio from '../data/product/Audio';\r\nimport laptop from '../data/product/Laptop'; */\r\nimport phone from '../data/product/Phone';\r\n/* import tablet from '../data/product/Tablet';\r\nimport variants from \"../scripts/Variants\"; */\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport matchFilter from \"../scripts/match\";\r\n\r\n\r\nconst defaultStateProducts = {\r\n    priceFloor: 3990,\r\n    priceCeiling: 139990,\r\n    characteristics: ['color', 'memory', 'producer'],\r\n    currentCategory: phone,\r\n    choise: {\r\n        memory: [],\r\n        producer: [],\r\n        color: [],\r\n        type: [],\r\n    },\r\n    productPage: 1,\r\n}\r\n\r\nconst defaultState = {\r\n    ...defaultStateProducts,\r\n    doc: document,\r\n    basket: new Map(),\r\n    fullCard: false,\r\n    scroll: 0,\r\n}\r\nfor(let i=0; i<localStorage.length;i++){\r\n    defaultState.basket.set(localStorage.key(i), Number(localStorage.getItem(localStorage.key(i))));\r\n}\r\n\r\nconsole.log(defaultState.basket);\r\nconst reducer = function(state = defaultState, {type, payload}){\r\n    let obj;\r\n    switch(type){\r\n        case 'changePriceFloor':\r\n            //console.log('change f'); \r\n            return {...state, priceFloor: payload, productPage: 1}\r\n        case 'changePriceСeiling':\r\n            //console.log('change c'); \r\n            return {...state, priceCeiling: payload, productPage: 1}\r\n        case 'addVariant':\r\n            let c = payload.char;\r\n            let v = payload.variant;\r\n            if(state.choise[c].includes(v)) return state;\r\n            let res = {...state, choise: {...state.choise, [c]: state.choise[c].concat(v)}, productPage: 1}\r\n            //console.log(res.choise.color);\r\n            return res;\r\n        case 'removeVariant':\r\n            let c1 = payload.char;\r\n            let v1 = payload.variant;\r\n            return  {...state, choise: {...state.choise, [c1]: state.choise[c1].filter(item=>item!==v1)}, productPage: 1}\r\n        case 'changeCurrentCategory':\r\n            return {...state, currentCategory: payload, choise: {\r\n                memory: [],\r\n                producer: [],\r\n                color: [],\r\n                type: [],\r\n            },}\r\n        case 'changePage':\r\n            if(state.productPage<2 && payload<0) return state;\r\n            if(state.productPage>=\r\n                Math.ceil(state\r\n                    .currentCategory\r\n                    .filter(item=>matchFilter(item, state.choise, {\r\n                        floor: state.priceFloor,\r\n                        ceiling: state.priceCeiling,\r\n                    }))\r\n                    .length/6)\r\n                &&payload>0) return state; \r\n            return {...state, productPage: state.productPage + payload}\r\n        case 'to1stPage':\r\n            return {...state, productPage: 1}\r\n        case 'setDefaultState':\r\n            return {...state, ...defaultStateProducts};\r\n        case 'addProduct':\r\n            obj=JSON.stringify(payload);\r\n            localStorage.setItem(obj, \r\n                localStorage.getItem(obj)-(-1))\r\n            return (\r\n                state.basket.has(obj)?\r\n                {...state, basket: state.basket.set(obj, state.basket.get(obj)+1)}:\r\n                {...state, basket: state.basket.set(obj, 1)}\r\n            )\r\n        case 'removeProduct':\r\n            //console.log(state.basket.get(payload));\r\n            obj=JSON.stringify(payload);\r\n            localStorage.getItem(obj)>1?\r\n            localStorage.setItem(obj, \r\n                localStorage.getItem(obj)-1):\r\n            localStorage.removeItem(obj);\r\n            if(state.basket.get(obj)===1) state.basket.delete(obj);\r\n            return (\r\n                state.basket.get(obj)>1?\r\n                {...state, basket: state.basket.set(obj, state.basket.get(obj)-1)}:\r\n                {...state, basket: state.basket}\r\n            ) \r\n        case 'openCard':\r\n            //console.log('scr1 ' + window.pageYOffset);\r\n            return {...state, fullCard: payload, scroll: window.pageYOffset};\r\n        case 'closeCard':\r\n            return {...state, fullCard: false};\r\n        default:\r\n            //console.log('default'); \r\n            return state;\r\n    }\r\n}\r\nconst store = createStore(reducer, composeWithDevTools());\r\nexport default store;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import { createStore } from \"redux\";\nimport access from '../data/product/Access';\nimport audio from '../data/product/Audio';\nimport laptop from '../data/product/Laptop';\nimport phone from '../data/product/Phone';\nimport tablet from '../data/product/Tablet';\nimport variants from \"../scripts/Variants\";\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport matchFilter from \"../scripts/match\";\nconst defaultState = {\n  priceFloor: 3990,\n  priceCeiling: 139990,\n  characteristics: ['color', 'memory', 'producer'],\n  currentCategory: phone,\n  choise: {\n    memory: [],\n    producer: [],\n    color: [],\n    type: []\n  },\n  productPage: 1\n};\nconst reducer = function (state = defaultState, act) {\n  switch (act.type) {\n    case 'changePriceFloor':\n      //console.log('change f'); \n      return {\n        ...state,\n        priceFloor: act.payload\n      };\n    case 'changePriceСeiling':\n      //console.log('change s'); \n      return {\n        ...state,\n        priceCeiling: act.payload\n      };\n    case 'addVariant':\n      let c = act.payload.char;\n      let v = act.payload.variant;\n      if (state.choise[c].includes(v)) return state;\n      let res = {\n        ...state,\n        choise: {\n          ...state.choise,\n          [c]: state.choise[c].concat(v)\n        }\n      };\n      console.log(res.choise.color);\n      return res;\n    case 'removeVariant':\n      let c1 = act.payload.char;\n      let v1 = act.payload.variant;\n      return {\n        ...state,\n        choise: {\n          ...state.choise,\n          [c1]: state.choise[c1].filter(item => item !== v1)\n        }\n      };\n    case 'changeCurrentCategory':\n      return {\n        ...state,\n        currentCategory: act.payload\n      };\n    case 'changePage':\n      if (state.productPage < 2 && act.payload < 0) return state;\n      if (state.productPage >= Math.ceil(state.currentCategory.filter(item => matchFilter(item, state.choise, {\n        floor: state.priceFloor,\n        ceiling: state.priceCeiling\n      })).length / 6) && act.payload > 0) return state;\n      return {\n        ...state,\n        productPage: state.productPage + act.payload\n      };\n    default:\n      console.log('default');\n      return state;\n  }\n};\nconst store = createStore(reducer, composeWithDevTools());\nexport default store;","map":{"version":3,"names":["createStore","access","audio","laptop","phone","tablet","variants","composeWithDevTools","matchFilter","defaultState","priceFloor","priceCeiling","characteristics","currentCategory","choise","memory","producer","color","type","productPage","reducer","state","act","payload","c","char","v","variant","includes","res","concat","console","log","c1","v1","filter","item","Math","ceil","floor","ceiling","length","store"],"sources":["C:/Users/Артемий/Desktop/Учеба/НеУнивер/WEB/Projects/Pet/store/src/store/index.js"],"sourcesContent":["import { createStore } from \"redux\";\r\nimport access from '../data/product/Access';\r\nimport audio from '../data/product/Audio';\r\nimport laptop from '../data/product/Laptop';\r\nimport phone from '../data/product/Phone';\r\nimport tablet from '../data/product/Tablet';\r\nimport variants from \"../scripts/Variants\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport matchFilter from \"../scripts/match\";\r\n\r\nconst defaultState = {\r\n    priceFloor: 3990,\r\n    priceCeiling: 139990,\r\n    characteristics: ['color', 'memory', 'producer'],\r\n    currentCategory: phone,\r\n    choise: {\r\n        memory: [],\r\n        producer: [],\r\n        color: [],\r\n        type: [],\r\n    },\r\n    productPage: 1\r\n}\r\nconst reducer = function(state = defaultState, act){\r\n    switch(act.type){\r\n        case 'changePriceFloor':\r\n            //console.log('change f'); \r\n            return {...state, priceFloor: act.payload}\r\n        case 'changePriceСeiling':\r\n            //console.log('change s'); \r\n            return {...state, priceCeiling: act.payload}\r\n        case 'addVariant':\r\n            let c = act.payload.char;\r\n            let v = act.payload.variant;\r\n            if(state.choise[c].includes(v)) return state;\r\n            let res = {...state, choise: {...state.choise, [c]: state.choise[c].concat(v)}}\r\n            console.log(res.choise.color);\r\n            return res;\r\n        case 'removeVariant':\r\n            let c1 = act.payload.char;\r\n            let v1 = act.payload.variant;\r\n            return  {...state, choise: {...state.choise, [c1]: state.choise[c1].filter(item=>item!==v1)}}\r\n        case 'changeCurrentCategory':\r\n            return {...state, currentCategory: act.payload}\r\n        case 'changePage':\r\n            if(state.productPage<2 && act.payload<0) return state;\r\n            if(state.productPage>=\r\n                Math.ceil(state\r\n                    .currentCategory\r\n                    .filter(item=>matchFilter(item, state.choise, {\r\n                        floor: state.priceFloor,\r\n                        ceiling: state.priceCeiling,\r\n                    }))\r\n                    .length/6)\r\n                &&act.payload>0) return state; \r\n            return {...state, productPage: state.productPage + act.payload}\r\n        default:\r\n            console.log('default'); \r\n            return state;\r\n    }\r\n}\r\nconst store = createStore(reducer, composeWithDevTools());\r\nexport default store;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}